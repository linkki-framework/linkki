:jbake-type: referenced
:jbake-status: referenced
:jbake-order: 0

// NO :source-dir: HERE, BECAUSE N&N NEEDS TO SHOW CODE AT IT'S TIME OF ORIGIN, NOT LINK TO CURRENT CODE
:images-folder-name: 00_releasenotes

=== Version 2.6.0

==== New features and improvements

===== Dependency Updates

The following versions have been updated:
[cols="a,a"]
|===
| Faktor-IPS                | 24.7.0
| Vaadin                    | 24.4.0
| Spring Boot               | 3.3.0
|===

//https://jira.convista.com/browse/LIN-1803
===== New BOM module for dependency management

The new linkki BOM module manages the versions and scopes of all linkki dependencies. 

To use the BOM module, simply import the BOM dependency in the dependency management of your project.
Any version and scope configurations of linkki dependencies can then be removed.

----
<dependency>
    <groupId>org.linkki-framework</groupId>
    <artifactId>linkki-bom</artifactId>
    <version>2.6.0</version>
    <type>pom</type>
    <scope>import</scope>
</dependency>
----

//https://jira.convista.com/browse/LIN-3293
[role="api-change"]
===== New VisibleType `INVISIBLE_IF_EMPTY`

A new enum value, `INVISIBLE_IF_EMPTY`, is now available in `VisibleType`. When used, the `VisibleAspectDefinition` evaluates the linked method's output. Components linked to this method will be hidden if the result is `null` or an empty `String`, enhancing UI cleanliness.
Further details can be found <<visible, in the documentation>>.

//https://jira.convista.com/browse/LIN-3561
===== Multi-selection in tables

* The `BindTableSelection` now includes a new attribute called `selectionMode`. Its default value is `Grid.SelectionMode.SINGLE`.
* A new interface `MultiSelectableTablePmo` has been added.
While `SelectableTablePmo` defines the necessary Methods when the `selectionMode` is `Grid.SelectionMode.SINGLE`,
so does the interface `MultiSelectableTablePmo` for when `selectionMode` is `Grid.SelectionMode.MULTI`.

Further information can be found in the <<ui-selectable-table,documentation>>.

//https://jira.convista.com/browse/LIN-3358
[role="api-change"]
===== Boolean support for `UIComboBox` and `UIRadioButtons`

* Booleans in `UIComboBox` and `UIRadioButtons` are now displayed with user-friendly text. No additional caption provider needs to be set. For more details, see documentation for <<ui-combobox, UIComboBox>> and <<ui-radiobuttons, UIRadioButtons>>.
* `UIYesNoComboBox` is deprecated and can be replaced with `UIComboBox`.

//https://jira.convista.com/browse/LIN-2932
===== New documentation for CSS custom properties in the linkki Theme

linkki theme defines CSS custom properties which is the easiest way to customize the UI. These are now documented in chapter 
<<css-custom-properties-linkki-theme, "Styling">>.

//https://jira.convista.com/browse/LIN-3682
===== linkki tutorial in the documentation
The linkki tutorial is now part of this documentation (see <<linkki-tutorial, Tutorial>>).

[role="api-change"]
//https://jira.convista.com/browse/LIN-3540
===== New visual for card like sections

*linkki* provides a theme `card-like-pages` that can make all contained sections have a card alike appearance by giving the content of sections a background color.
This theme makes `AbstractPage` component that contain sections appear more structured.

.card-like-pages theme in previous version
image::{images}{images-folder-name}/2-6_card-section_before.png[]

This theme has been reworked:

.Notable Changes
[IMPORTANT]
====
* The theme `card-section-pages` has been changed to `card-sections`.
* `card-sections` does not only apply to `AbstractPage` components, but to all components.
* The background of the theme does not only cover the content components, but the whole section.
+
.card-like-sections theme now
image::{images}{images-folder-name}/2-6_card-section_after.png[]
====

To reflect the changes, following constants have been renamed:

|====
| Class         | Old name  | New name
| LinkkiTheme   | VARIANT_CARD_SECTION_PAGES    | VARIANT_CARD_SECTIONS
| LinkkiSection     | CLASS_SECTION_STYLE_CARD  | THEME_VARIANT_CARD
|====

See <<section-theme-variants, section "Theme Variants">> for more details on how to use the theme variant.

//https://jira.convista.com/browse/LIN-3701
[role="api-change"]
===== Customizable position of the loading indicator

When using application header, the loading indicator has the same color as the header, making it effectively invisible.
To mitigate this problem, the loading indicator was moved to the bottom of the page by default.

The position of the loading indicator can be configured with two new css properties in the _linkki_ theme:

* --linkki-loading-indicator-top
* --linkki-loading-indicator-bottom

[IMPORTANT]
In de _linkki_ theme the loading indicator is configured to be displayed at the bottom of the page by default.

For more details see <<loading-indicator, loading indicator>>.

[role="api-change"]
===== Improved in datatype conversion

//https://jira.convista.com/browse/LIN-3726
New converters for `GregorianCalendar` and `Money`::
Converters have been added for `GregorianCalendar` and `Money` that make them usable with `String`-valued UI components such as `@UITextField`. +
The `StringToGregorianCalendarConverter` is integrated into the <<linkki-converter-registry, LinkkiConverterRegistry>> and can be used with `@UITextField` or `@UILabel` directly. +
`StringToMoneyConverter` has be added in the Faktor-IPS extension. Its functionality is documented <<ips-converters, here>>. This converter is not applied by default, thus have to be added to the converter registry if needed.

//https://jira.convista.com/browse/LIN-3726
Changed String format for `Date`:: In the previous version, `Date` values has been converted to String using the converter provided by Vaadin format, which displays a date as `Jan 12, 1952` in the English locale. This behavior is not consistent with the presentation in `UIDateField`. Thus, a new `StringToDateConverter` has been introduced which presents a date as `01/01/1952` in English, and `01.01.1952` in German.

//https://jira.convista.com/browse/LIN-3680
Improved behavior with overflowing integers::
Input values in a `@UIIntegerField` that exceed the maximum allowed integer do not overflow anymore. Instead, an error is displayed and the field is reset to its previous valid input.

//https://jira.convista.com/browse/LIN-3680
Consistent naming for number converters::
The number converters have been deprecated and replaced with new ones that match the correct naming schema, using the presentation type first.
+
|===
| *Old class* | *New class*
| `FormattedNumberToStringConverter` | `FormattedStringToNumberConverter`
| `FormattedIntegerToStringConverter` | `FormattedStringToIntegerConverter`
| `FormattedDoubleToStringConverter` | `FormattedStringToDoubleConverter`
| `FormattedDecimalFieldToStringConverter` | `FormattedStringToDecimalConverter`
|===
+
[NOTE]
The converters are used by the corresponding UI annotations by default. Changes are only necessary if `FormattedNumberToStringConverter` was extended.

===== Other
//https://jira.convista.com/browse/LIN-3671
* `BindVariantNames` now applies to all Vaadin components, expanding its functionality beyond its previous limitation to components that implemented HasTheme.

//https://jira.convista.com/browse/LIN-3567
* All Notifications (`info`, `warning` and `error`) now include a close button. Additionally, the default duration for warning notifications has been increased to `6000 ms`.

==== Bugfixes

//https://jira.convista.com/browse/LIN-3674
===== Default Error Page Exception Handling

For better message handling in the `LinkkiErrorPage` a new `MessageException` was introduced.

* On receiving a `MessageException`, the error page shows the message of this exception in production as well as in development mode.
* On receiving any other exception:
** In development mode: a custom message or the exception message is shown to the user.
** In production mode: only a generic error message is shown to the user to hide any sensitive information.

Additionally logging for the thrown exception has been added. `MessageExceptions` are only logged if they contain a cause. All other exceptions are logged anyways.

//https://jira.convista.com/browse/LIN-3512
===== Width of nested components

The width of nested components was fixed.
Any value that is set as `width` on `@UINestedComponent` is now only applied to the layout element.
The nested component itself gets a width of 100%.

In the following example the wrapping element of the `@UIVerticalLayout` gets a width of 50% but the `@UIVerticalLayout` itself has full width.

[source,java]
----
@UINestedComponent(position = 10, width = "50%")
public PersonPmo getPerson() {
    return new PersonPmo();
}

@UIVerticalLayout
class PersonPmo  {

    @UITextField(position = 10, label = "Firstname")
    public String getFirstname() {
        return "Max";
    }

    @UITextField(position = 20, label = "Lastname")
    public String getLastname() {
        return "Mustermann";
    }

}
----
